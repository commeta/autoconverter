# CHANGELOG

## Основные улучшения в новой версии:

### 1. **Современная архитектура**
- Замена устаревшего `pyinotify` на `watchdog` (поддерживает Python 3.8+)
- Использование `asyncio` для асинхронной обработки событий
- Современные библиотеки: `Pillow` вместо `webptools`

### 2. **Улучшенная производительность**
- Многопоточная обработка с `ThreadPoolExecutor`
- Debouncing событий для предотвращения дублирования
- Эффективная очередь событий с ограничением размера

### 3. **Лучшая конфигурация**
- Поддержка YAML и JSON конфигурационных файлов
- Dataclass для типизированной конфигурации
- Возможность создания образца конфигурации

### 4. **Надежность и безопасность**
- Proper error handling и logging
- Graceful shutdown с обработкой сигналов
- Очистка пустых директорий
- Сохранение метаданных файлов

### 5. **Удобство использования**
- Systemd интеграция
- Подробное логирование с настраиваемыми уровнями
- Скрипт установки
- Comprehensive documentation

### 6. **Исправленные проблемы**
- Убрана зависимость от `webptools` (проблемы с установкой)
- Исправлена логика обработки событий перемещения файлов
- Улучшена обработка прав доступа к файлам
- Исправлены race conditions при обработке событий

### 7. **Новые возможности**
- Поддержка lossless WebP
- Сохранение EXIF данных
- Настраиваемые параметры сжатия
- Мониторинг производительности

Новая версия полностью совместима с существующей NGINX конфигурацией и обеспечивает значительно лучшую производительность и надежность.
